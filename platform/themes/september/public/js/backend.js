!function(e){"use strict";e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),e(document).ready((function(){e(".block--method input[name=method]").on("change",(function(){e(this).closest(".block--method").addClass("active"),e(this).closest(".block--method").find(".block__content").slideDown(),e(this).closest(".block--method").siblings(".block--method").removeClass("active"),e(this).closest(".block--method").siblings(".block--method").find(".block__content").slideUp()})),e(".nonlinear").each((function(t,s){var a=e(s),r=a.data("min"),o=a.data("max"),i=e(s).closest(".nonlinear-wrapper");noUiSlider.create(s,{connect:!0,behaviour:"tap",start:[i.find(".product-filter-item-price-0").val(),i.find(".product-filter-item-price-1").val()],step:o/10,range:{min:r,"10%":.1*o,"20%":.2*o,"30%":.3*o,"40%":.4*o,"50%":.5*o,"60%":.6*o,"70%":.7*o,"80%":.8*o,"90%":.9*o,max:o}});var n=[e(".ps-slider__min"),e(".ps-slider__max")],l=parseFloat(e("div[data-current-exchange-rate]").data("current-exchange-rate"));s.noUiSlider.on("update",(function(e,t){var s,a,r,o,i;n[t].html((s=Math.round(e[t]*l),r=isFinite(+s)?+s:0,(i=((o=isFinite(+a)?Math.abs(a):0)?function(e,t){var s=Math.pow(10,t);return Math.round(e*s)/s}(r,o):Math.round(r)).toString().split("."))[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,",")),(i[1]||"").length<o&&(i[1]=i[1]||"",i[1]+=new Array(o-i[1].length+1).join("0")),i.join(".")))})),s.noUiSlider.on("end",(function(e,t){i.find(".product-filter-item-price-"+t).val(Math.round(e[t]*l)),i.find(".product-filter-item").closest("form").submit()}))}));var t=function(t,a){if(void 0===t.errors||_.isArray(t.errors))if(void 0!==t.responseJSON)if(void 0!==t.responseJSON.errors&&422===t.status)s(t.responseJSON.errors,a);else if(void 0!==t.responseJSON.message)e(a).find(".error-message").html(t.responseJSON.message).show();else{var r="";e.each(t.responseJSON,(function(t,s){e.each(s,(function(e,t){r+=t+"<br />"}))})),e(a).find(".error-message").html(r).show()}else e(a).find(".error-message").html(t.statusText).show();else s(t.errors,a)},s=function(t,s){var a="";e.each(t,(function(e,t){a+=t+"<br />"})),e(s).find(".success-message").html("").hide(),e(s).find(".error-message").html("").hide(),e(s).find(".error-message").html(a).show()};window.showAlert=function(t,s){if(t&&""!==s){var a=Math.floor(1e3*Math.random()),r='<div class="alert '.concat(t,' alert-dismissible" id="').concat(a,'">\n                            <span class="close feather icon-x" data-dismiss="alert" aria-label="close"></span>\n                            <i class="feather icon-')+("alert-success"===t?"check-circle":"alert-circle")+' message-icon"></i>\n                            '.concat(s,"\n                        </div>");e("#alert-container").append(r).ready((function(){window.setTimeout((function(){e("#alert-container #".concat(a)).remove()}),6e3)}))}},e(document).on("click",".generic-form button[type=submit]",(function(s){var a=this;s.preventDefault(),s.stopPropagation();var r=e(this).html();e(this).prop("disabled",!0).addClass("btn-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({type:"POST",cache:!1,url:e(this).closest("form").prop("action"),data:new FormData(e(this).closest("form")[0]),contentType:!1,processData:!1,success:function(t){e(a).closest("form").find(".success-message").html("").hide(),e(a).closest("form").find(".error-message").html("").hide(),t.error?(e(a).closest("form").find(".error-message").html(t.message).show(),setTimeout((function(){e(this).closest("form").find(".error-message").html("").hide()}),5e3)):(e(a).closest("form").find("input[type=email]").val(""),e(a).closest("form").find("input[type=text]").val(""),e(a).closest("form").find(".success-message").html(t.message).show(),setTimeout((function(){e(this).closest("form").find(".success-message").html("").hide()}),5e3)),e(a).prop("disabled",!1).removeClass("btn-disabled").html(r)},error:function(s){e(a).prop("disabled",!1).removeClass("btn-disabled").html(r),t(s,e(a).closest("form"))}})})),e(document).ready((function(){window.onBeforeChangeSwatches=function(){e(".add-to-cart-form button[type=submit]").prop("disabled",!0).addClass("btn-disabled")},window.onChangeSwatchesSuccess=function(t){if(e(".add-to-cart-form .error-message").hide(),e(".add-to-cart-form .success-message").hide(),t.error)e(".add-to-cart-form button[type=submit]").prop("disabled",!0).addClass("btn-disabled"),e(".number-items-available").html('<span class="text-danger">('+t.message+")</span>").show(),e(".hidden-product-id").val("");else{e(".add-to-cart-form").find(".error-message").hide(),e(".product__price .product-sale-price-text").text(t.data.display_sale_price),t.data.sale_price!==t.data.price?e(".product__price .product-price-text").text(t.data.display_price).show():e(".product__price .product-price-text").text(t.data.display_price).hide(),e(".hidden-product-id").val(t.data.id),e(".add-to-cart-form button[type=submit]").prop("disabled",!1).removeClass("btn-disabled"),e(".number-items-available").html('<span class="text-success">('+t.message+")</span>").show();var s="";t.data.image_with_sizes.origin.forEach((function(e){s+='<div class="item"><img src="'+e+'" alt="image"/></div>'}));var a="";t.data.image_with_sizes.thumb.forEach((function(e){a+='<div class="item"><img src="'+e+'" alt="image"/></div>'}));var r=e(".product--detail"),o=r.find(".product__gallery"),i=r.find(".product__thumbs");o.slick("unslick"),i.slick("unslick"),o.html(s),i.html(a),o.slick({slidesToShow:1,slidesToScroll:1,asNavFor:".product__thumbs",fade:!0,dots:!1,infinite:!1,arrows:o.data("arrow"),prevArrow:'<a href="#"><i class="fa fa-angle-left"></i></a>',nextArrow:'<a href="#"><i class="fa fa-angle-right"></i></a>'}),i.slick({slidesToShow:i.data("item"),slidesToScroll:1,infinite:!1,arrows:i.data("arrow"),focusOnSelect:!0,prevArrow:'<a href="#"><i class="fa fa-angle-up"></i></a>',nextArrow:'<a href="#"><i class="fa fa-angle-down"></i></a>',asNavFor:".product__gallery",vertical:!0,responsive:[{breakpoint:1200,settings:{arrows:i.data("arrow"),slidesToShow:4,vertical:!1,prevArrow:'<a href="#"><i class="fa fa-angle-left"></i></a>',nextArrow:'<a href="#"><i class="fa fa-angle-right"></i></a>'}},{breakpoint:992,settings:{arrows:i.data("arrow"),slidesToShow:4,vertical:!1,prevArrow:'<a href="#"><i class="fa fa-angle-left"></i></a>',nextArrow:'<a href="#"><i class="fa fa-angle-right"></i></a>'}},{breakpoint:480,settings:{slidesToShow:3,vertical:!1,prevArrow:'<a href="#"><i class="fa fa-angle-left"></i></a>',nextArrow:'<a href="#"><i class="fa fa-angle-right"></i></a>'}}]}),e(window).trigger("resize")}},e(document).on("click",".add-to-cart-button",(function(t){t.preventDefault();var s=e(this),a=s.html();s.prop("disabled",!0).addClass("btn-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({url:s.prop("href"),method:"POST",data:{id:s.data("id")},dataType:"json",success:function(t){if(s.prop("disabled",!1).removeClass("btn-disabled").html(a),t.error)return window.showAlert("alert-danger",t.message),!1;"checkout"===s.prop("name")&&void 0!==t.data.next_url?window.location.href=t.data.next_url:e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e("#panel-cart .panel__content").html(t.data.html),e(".btn-shopping-cart.panel-trigger span").text(t.data.count),e(".btn-shopping-cart.panel-trigger").trigger("click"))}})},error:function(e){s.prop("disabled",!1).removeClass("btn-disabled").html(a),window.showAlert("alert-danger",e.message)}})})),e(document).on("click",".add-to-cart-form button[type=submit]",(function(s){s.preventDefault(),s.stopPropagation();var a=e(this);if(e(".hidden-product-id").val()){var r=a.html();a.prop("disabled",!0).addClass("btn-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),a.closest("form").find(".error-message").hide(),a.closest("form").find(".success-message").hide(),e.ajax({type:"POST",cache:!1,url:a.closest("form").prop("action"),data:new FormData(a.closest("form")[0]),contentType:!1,processData:!1,success:function(t){if(a.prop("disabled",!1).removeClass("btn-disabled").html(r),t.error)return a.closest("form").find(".error-message").html(t.message).show(),!1;a.closest("form").find(".success-message").html(t.message).show(),"checkout"===a.prop("name")&&void 0!==t.data.next_url?window.location.href=t.data.next_url:e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e("#panel-cart .panel__content").html(t.data.html),e(".btn-shopping-cart.panel-trigger span").text(t.data.count),e(".btn-shopping-cart.panel-trigger").trigger("click"))}})},error:function(e){a.prop("disabled",!1).removeClass("btn-disabled").html(r),t(e,a.closest("form"))}})}else a.prop("disabled",!0).addClass("btn-disabled")})),e(document).on("click",".add-to-wishlist-button",(function(t){t.preventDefault();var s=e(this),a=e(this).html();s.html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({url:s.prop("href"),method:"POST",success:function(t){if(t.error)return s.html(a),window.showAlert("alert-danger",t.message),!1;window.showAlert("alert-success",t.message),e(".btn-shopping-cart.btn-wishlist span").text(t.data.count),s.html('<i class="fa fa-heart"></i><span>'+s.data("added-text")+"</span>").addClass("remove-from-wishlist-button").removeClass("add-to-wishlist-button")},error:function(e){s.html(a),window.showAlert("alert-danger",e.message)}})})),e(document).on("click",".remove-from-wishlist-button",(function(t){t.preventDefault();var s=e(this),a=e(this).html();s.html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({url:s.prop("href"),method:"DELETE",success:function(t){if(t.error)return s.html(a),window.showAlert("alert-danger",t.message),!1;window.showAlert("alert-success",t.message),e(".btn-shopping-cart.btn-wishlist span").text(t.data.count),s.html('<i class="fa fa-heart-o"></i><span>'+s.data("add-text")+"</span>").removeClass("remove-from-wishlist-button").addClass("add-to-wishlist-button")},error:function(e){s.html(a),window.showAlert("alert-danger",e.message)}})})),e(document).on("change",".shop__sort select",(function(){e(this).closest("form").submit()})),e(document).on("change",".product-filter-item",(function(){e(this).closest("form").submit()})),e(document).on("click",".form--review-product button[type=submit]",(function(s){var a=this;s.preventDefault(),s.stopPropagation();var r=e(this).html();e(this).prop("disabled",!0).addClass("btn-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({type:"POST",cache:!1,url:e(this).closest("form").prop("action"),data:new FormData(e(this).closest("form")[0]),contentType:!1,processData:!1,success:function(t){e(a).closest("form").find(".success-message").html("").hide(),e(a).closest("form").find(".error-message").html("").hide(),t.error?(e(a).closest("form").find(".error-message").html(t.message).show(),setTimeout((function(){e(this).closest("form").find(".error-message").html("").hide()}),5e3)):(e(a).closest("form").find("select").val(0),e(a).closest("form").find("textarea").val(""),e(a).closest("form").find(".success-message").html(t.message).show(),e.ajax({url:window.siteUrl+"/ajax/reviews/"+e(a).closest("form").find("input[name=product_id]").val(),method:"GET",success:function(t){t.error||(e(".block--product-reviews .block__content").html(t.data.html),e(document).find("select.rating").each((function(){var t="true"===e(this).attr("data-read-only");e(this).barrating({theme:"fontawesome-stars",readonly:t,emptyValue:"0"})})))}}),setTimeout((function(){e(this).closest("form").find(".success-message").html("").hide()}),5e3)),e(a).prop("disabled",!1).removeClass("btn-disabled").html(r)},error:function(s){e(a).prop("disabled",!1).removeClass("btn-disabled").html(r),t(s,e(a).closest("form"))}})}))})),e(".product__qty .up").on("click",(function(t){t.preventDefault();var s=parseInt(e(this).next(".qty-input").val(),10);e(this).next(".qty-input").val(s+1)})),e(".product__qty .down").on("click",(function(t){t.preventDefault();var s=parseInt(e(this).prev(".qty-input").val(),10);s>0&&e(this).prev(".qty-input").val(s-1)})),e(document).on("click",".remove-cart-button",(function(t){t.preventDefault(),e(".confirm-remove-item-cart").data("url",e(this).prop("href")),e("#remove-item-modal").modal("show")})),e(document).on("click",".confirm-remove-item-cart",(function(t){t.preventDefault();var s=e(this),a=s.html();s.prop("disabled",!0).addClass("btn-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({url:s.data("url"),method:"GET",success:function(t){if(s.prop("disabled",!1).removeClass("btn-disabled").html(a),t.error)return window.showAlert("alert-danger",t.message),!1;s.closest(".modal").modal("hide"),e(".section--shopping-cart").length&&e(".section--shopping-cart").load(window.location.href+" .section--shopping-cart > *"),e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e("#panel-cart .panel__content").html(t.data.html),e(".btn-shopping-cart.panel-trigger span").text(t.data.count))}})},error:function(e){s.prop("disabled",!1).removeClass("btn-disabled").html(a),window.showAlert("alert-danger",e.message)}})})),e(document).on("click",".js-add-to-wishlist-button",(function(t){t.preventDefault();var s=e(this),a=e(this).html();s.html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({url:s.prop("href"),method:"POST",success:function(t){if(t.error)return s.html(a),window.showAlert("alert-danger",t.message),!1;window.showAlert("alert-success",t.message),e(".btn-shopping-cart.btn-wishlist span").text(t.data.count),s.html('<i class="fa fa-heart"></i>').removeClass("js-add-to-wishlist-button").addClass("js-remove-from-wishlist-button active")},error:function(e){s.html(a),window.showAlert("alert-danger",e.message)}})})),e(document).on("click",".js-remove-from-wishlist-button",(function(t){t.preventDefault();var s=e(this),a=e(this).html();s.html('<i class="fa fa-spin fa-spinner"></i>'),e.ajax({url:s.prop("href"),method:"DELETE",success:function(t){if(t.error)return s.html(a),window.showAlert("alert-danger",t.message),!1;e(".btn-shopping-cart.btn-wishlist span").text(t.data.count),s.closest("tr").remove(),s.html('<i class="fa fa-heart-o"></i>').removeClass("js-remove-from-wishlist-button active").addClass("js-add-to-wishlist-button")},error:function(e){s.html(a),window.showAlert("alert-danger",e.message)}})}))}))}(jQuery);
